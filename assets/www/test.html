<!DOCTYPE html>
<html>
<head>
<title>My Page</title>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="stylesheet"
    href="http://code.jquery.com/mobile/1.0.1/jquery.mobile-1.0.1.min.css" />
<script type="text/javascript"
    src="http://code.jquery.com/jquery-1.6.4.min.js"></script>
<script type="text/javascript"
    src="http://code.jquery.com/mobile/1.0.1/jquery.mobile-1.0.1.min.js"></script>
<script type="text/javascript" src="cordova-2.3.0.js"></script>
<script type="text/javascript">
var sensorID = null;
 
function doAction() {
    var flg = document.getElementById('chk').checked;
    if(flg){
        var opt = {frequency:100};
        sensorID = navigator.accelerometer.
            watchAcceleration(onSuccess, onError, opt);
    } else {
        navigator.accelerometer.clearWatch(sensorID);
    }
}
 
function onSuccess(acceleration) {
    var x = acceleration.x;
    var y = acceleration.y;
    var z = acceleration.z;
    var t = acceleration.timestamp;
    var str = "x: " + x + "<br>" +
        "y: " + y + "<br>" +
        "z: " + z + "<br>" +
        "<" + t + ">";
    document.getElementById('msg').innerHTML = str;
}
 
function onError() {
    alert('Error!');
}
</script>
 
</head>
<body onload="onLoad();">
    <!-- home page -->
    <div id="home" data-role="page">
        <div data-role="header">
            <h1>Sample</h1>
        </div>
        <div data-role="content">
            <h2>Sample Page</h2>
            <div id="msg"></div>
            <input type="checkbox" id="chk" onchange="doAction();">
            <label for="chk">Acceleration</label>
        </div>
    </div>
</body>
</html>
